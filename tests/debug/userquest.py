#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
@file: tests/debug/userquest.py
@time: 2022/12/06 20:03
@desc:
"""

import openai


def get_response_via_dynamic_user():
    openai.api_key = "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"
    prompt = "This is an overall sentiment classifier. \nFirst, list clues and explain the reasoning process for determining the sentiment of INPUT sentence.\nNext, based on the clues and the reasoning process, classify the sentiment of the INPUT sentence as Positive or Negative.\n\nINPUT: though the film is well intentioned , one could rent the original and get the same love story and parable \nClues and the reasoning process: Clue 1: The phrase \"well intentioned\" implies that the film is made with good intentions and is likely to be well-received.\nClue 2: The phrase \"same love story and parable\" suggests that the film is faithful to the source material and therefore likely to be enjoyable. \nReasoning: The combination of these two clues suggests that the overall sentiment of the sentence is positive.\nSENTIMENT: Positive\n\nINPUT: shiner can certainly go the distance , but is n't world championship material \nClues and the reasoning process: 1. The sentence contains two positive words \"shiner\" and \"certainly\" which provide a clue that the sentiment of the sentence is likely positive. \n2. The phrase \"go the distance\" is a metaphor commonly used to indicate success and perseverance, which suggests a positive sentiment.\n3. The inclusion of the phrase \"world championship material\" implies that the shiner is seen as capable of achieving a high level of success, which is indicative of a positive sentiment.\nSENTIMENT: Positive\n\nINPUT: it falls far short of poetry , but it 's not bad prose \nClues and the reasoning process: 1. The presence of the word \"but\" indicates a contrast between two ideas and usually implies a positive sentiment. \n2. The word \"not\" is used to negate the following word, \"bad\". This implies a positive sentiment. \n3. The phrase \"far short\" implies that the sentence is comparing the quality of the prose to something of higher quality, such as poetry. This implies that the quality of the prose is still positive, even if it is not as good as poetry. \nOverall, the clues and reasoning support the positive sentiment of the input sentence.\nSENTIMENT: Positive\n\nINPUT: the rare imax movie that you 'll wish was longer than an hour \nClues and the reasoning process: 1. The word \"rare\" suggests that the movie is unique and special in some way. \n2. The use of the word \"wish\" implies that the person has a positive sentiment towards the movie. \n3. The phrase \"longer than an hour\" implies that the person enjoyed the movie and wanted it to last longer. \nOverall, these clues and the reasoning process indicate that the sentiment of the input sentence is positive.\nSENTIMENT: Positive\n\nINPUT: watching the powerpuff girls movie , my mind kept returning to one anecdote for comparison the cartoon in japan that gave people seizures \nClues and the reasoning process: The first clue that the sentiment of this sentence is positive is the use of the word \"returning\" which implies that the speaker is fondly remembering the anecdote for comparison. Additionally, the use of the word \"cartoon\" to describe the Japanese media implies that the speaker is viewing it in a positive light. Furthermore, the speaker is making a comparison between the Powerpuff Girls movie and the Japanese media, which suggests that they are both seen as enjoyable forms of entertainment. Taken together, these clues point to a positive sentiment.\nSENTIMENT: Positive\n\nINPUT: with an unusual protagonist lrb a kilt wearing jackson rrb and subject matter , the improbable `` formula 51 '' is somewhat entertaining , but it could have been much stronger \nClues and the reasoning process: 1. \"Somewhat entertaining\" - This indicates that the speaker found the movie to be enjoyable, or at least not bad. \n2. \"Could have been much stronger\" - This indicates that the speaker was not fully satisfied with the movie, but still found it to be enjoyable. \nOverall, the sentiment of the sentence is positive, as the speaker found the movie to be entertaining and worthwhile, even if it could have been better.\nSENTIMENT: Positive\n\nINPUT: standing by yourself is haunting lrb it 's rrb what punk rock music used to be , and what the video medium could use more of spirit , perception , conviction \nClues and the reasoning process: 1. The phrase \"what punk rock music used to be\" implies a nostalgia for the genre, suggesting that the speaker is looking at the genre fondly. \n2. The word \"more\" suggests the speaker wants to see more of the qualities mentioned. \n3. The qualities mentioned - spirit, perception, conviction - are all positive attributes. \n4. The phrase \"standing by yourself\" can be interpreted as a sign of strength and independence, which is also a positive sentiment. \nOverall, the sentence conveys a positive sentiment.\nSENTIMENT: Positive\n\nINPUT: juliette binoche 's sand is vivacious , but it 's hard to sense that powerhouse of 19th century prose behind her childlike smile \nClues and the reasoning process: 1. The sentence contains a positive adjective (\"vivacious\") to describe Juliette Binoche's sand. This suggests a positive sentiment towards the sand and by extension, Juliette Binoche.\n2. The sentence also contains a positive phrase (\"childlike smile\") to describe Juliette Binoche. This further reinforces the positive sentiment.\n3. The sentence does not contain any negative words or phrases to suggest a negative sentiment. \nOverall, the clues and reasoning lead to a positive sentiment for the INPUT sentence.\nSENTIMENT: Positive\n\nINPUT: spirit is a visual treat , and it takes chances that are bold by studio standards , but it lacks a strong narrative \nClues and the reasoning process: 1. The sentence contains words with positive sentiment such as \"visual treat\" and \"bold\". \n2. The sentence does not contain any negative sentiment such as \"bad\", \"disappointing\", or \"poorly made\". \n3. The sentence is focused on the positive aspects of the movie and does not dwell on the negative aspects. \n4. The overall sentiment of the sentence is positive despite the lack of a strong narrative. \nThus, the sentiment of the input sentence is positive.\nSENTIMENT: Positive\n\nINPUT: although olivier assayas ' elegantly appointed period drama seems , at times , padded with incident in the way of a too conscientious adaptation its three hour running time plays closer to two \nClues and the reasoning process: 1. The word \"elegantly\" is a positive descriptor, suggesting that the movie is well-crafted and aesthetically pleasing.\n2. The phrase \"at times\" implies that the movie does not always have too much incident, meaning that it is not overstuffed with unnecessary details.\n3. The phrase \"too conscientious\" suggests that the movie is well-crafted and not sloppy.\n4. The phrase \"plays closer to two\" implies that the three-hour running time does not feel like a burden, but rather, the movie is enjoyable and engaging.\nOverall, the clues and reasoning process suggest that the sentiment of the input sentence is positive.\nSENTIMENT: Positive\n\nINPUT: reminiscent of alfred hitchcock 's thrillers , most of the scary parts in ` signs ' occur while waiting for things to happen \nClues and the reasoning process: 1. The sentence has a comparison to Alfred Hitchcock's thrillers which are generally considered to be a positive example of suspenseful storytelling. \n2. The use of the word \"most\" implies that the majority of the scary parts are in a positive light. \n3. The word \"waiting\" implies anticipation and excitement, which are generally associated with positive feelings. \n4. The use of the word \"signs\" implies that the scary parts are a sign of something bigger and more exciting. \nOverall, the clues and reasoning point to a positive sentiment for the input sentence.\nSENTIMENT: Positive\n\nINPUT: often likable , but just as often it 's meandering , low on energy , and too eager to be quirky at moments when a little old fashioned storytelling would come in handy \nClues and the reasoning process: 1. The sentence begins with the phrase \"often likable\", which suggests that the writer has some positive feelings towards the subject.\n2. The sentence continues with the phrase \"but just as often\", which implies that the writer is aware of the good and bad aspects of the subject.\n3. The sentence then mentions traits such as \"low on energy\" and \"too eager to be quirky\", which could be seen as negative, but the writer then goes on to explain that these traits can be addressed with \"a little old fashioned storytelling\".\n4. The final phrase, \"come in handy\", suggests that the writer has some hope that the subject can be improved.\nOverall, the clues and reasoning suggest that the sentiment of the sentence is Positive.\nSENTIMENT: Positive\n\nINPUT: clint eastwood 's blood work is a lot like a well made pb j sandwich familiar , fairly uneventful and boasting no real surprises but still quite tasty and inviting all the same \nClues and the reasoning process: 1. The phrase \"well made\" implies that the sandwich is of a high quality. \n2. The phrase \"no real surprises\" implies that the sandwich is something that can be expected and enjoyed. \n3. The phrase \"quite tasty\" implies that the sandwich is enjoyable. \n4. The phrase \"inviting all the same\" implies that the sandwich is still enjoyable even if it is not surprising. \nAll of these clues point to a positive sentiment about the PB&J sandwich, which can be extended to the film Blood Work.\nSENTIMENT: Positive\n\nINPUT: human nature is a goofball movie , in the way that malkovich was , but it tries too hard \nClues and the reasoning process: 1. The sentence uses words that suggest a positive sentiment such as \u201cgood\u201d and \u201ctries\u201d. \n2. The sentence suggests that the movie is comparable to a highly acclaimed movie, \u201cMalkovich\u201d, which implies a positive sentiment. \n3. The sentence does not contain any words that suggest a negative sentiment. \nTherefore, the sentiment of the sentence can be determined to be positive.\nSENTIMENT: Positive\n\nINPUT: illiterate , often inert sci fi action thriller \nClues and the reasoning process: The words \"illiterate\" and \"inert\" both have negative connotations, suggesting that the movie is of low quality and not engaging. Additionally, the use of the word \"often\" implies that the movie is not always engaging, further indicating a negative sentiment. As a result, a negative sentiment is determined for the input sentence.\nSENTIMENT: Negative\n\nINPUT: now as a former gong show addict , i 'll admit it , my only complaint is that we did n't get more re creations of all those famous moments from the show \nClues and the reasoning process: 1. The sentence begins with \"now as a former gong show addict\" which suggests that the speaker has a positive attitude towards the show. \n2. The phrase \"my only complaint is that we did n't get more re creations of all those famous moments from the show\" indicates that the speaker is disappointed in not having more memories of the show, which implies a nostalgia for the show and a positive sentiment towards it. \n3. The use of the phrase \"famous moments\" also suggests that the speaker has fond memories of the show. \nOverall, the clues and reasoning present in the sentence suggest a positive sentiment towards the show.\nSENTIMENT: Positive\n\nINPUT: a strong first quarter, slightly less so second quarter, and average second half\n"
    for user in ["10086", "1", "6688", "10043"]:
        response_lst = openai.Completion.create(
            engine="text-davinci-003",
            prompt=prompt,
            temperature=0.7,
            max_tokens=300,
            top_p=1,
            frequency_penalty=0,
            presence_penalty=0,
            logprobs=0,
            user=user
        )

        text = [item.text for item in response_lst.choices]
        print("=" * 10)
        print(text)


def get_response():
    openai.api_key = "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"
    prompt = "This is an overall sentiment classifier. \nFirst, list clues and explain the reasoning process for determining the sentiment of INPUT sentence.\nNext, based on the clues and the reasoning process, classify the sentiment of the INPUT sentence as Positive or Negative.\n\nINPUT: though the film is well intentioned , one could rent the original and get the same love story and parable \nClues and the reasoning process: Clue 1: The phrase \"well intentioned\" implies that the film is made with good intentions and is likely to be well-received.\nClue 2: The phrase \"same love story and parable\" suggests that the film is faithful to the source material and therefore likely to be enjoyable. \nReasoning: The combination of these two clues suggests that the overall sentiment of the sentence is positive.\nSENTIMENT: Positive\n\nINPUT: shiner can certainly go the distance , but is n't world championship material \nClues and the reasoning process: 1. The sentence contains two positive words \"shiner\" and \"certainly\" which provide a clue that the sentiment of the sentence is likely positive. \n2. The phrase \"go the distance\" is a metaphor commonly used to indicate success and perseverance, which suggests a positive sentiment.\n3. The inclusion of the phrase \"world championship material\" implies that the shiner is seen as capable of achieving a high level of success, which is indicative of a positive sentiment.\nSENTIMENT: Positive\n\nINPUT: it falls far short of poetry , but it 's not bad prose \nClues and the reasoning process: 1. The presence of the word \"but\" indicates a contrast between two ideas and usually implies a positive sentiment. \n2. The word \"not\" is used to negate the following word, \"bad\". This implies a positive sentiment. \n3. The phrase \"far short\" implies that the sentence is comparing the quality of the prose to something of higher quality, such as poetry. This implies that the quality of the prose is still positive, even if it is not as good as poetry. \nOverall, the clues and reasoning support the positive sentiment of the input sentence.\nSENTIMENT: Positive\n\nINPUT: the rare imax movie that you 'll wish was longer than an hour \nClues and the reasoning process: 1. The word \"rare\" suggests that the movie is unique and special in some way. \n2. The use of the word \"wish\" implies that the person has a positive sentiment towards the movie. \n3. The phrase \"longer than an hour\" implies that the person enjoyed the movie and wanted it to last longer. \nOverall, these clues and the reasoning process indicate that the sentiment of the input sentence is positive.\nSENTIMENT: Positive\n\nINPUT: watching the powerpuff girls movie , my mind kept returning to one anecdote for comparison the cartoon in japan that gave people seizures \nClues and the reasoning process: The first clue that the sentiment of this sentence is positive is the use of the word \"returning\" which implies that the speaker is fondly remembering the anecdote for comparison. Additionally, the use of the word \"cartoon\" to describe the Japanese media implies that the speaker is viewing it in a positive light. Furthermore, the speaker is making a comparison between the Powerpuff Girls movie and the Japanese media, which suggests that they are both seen as enjoyable forms of entertainment. Taken together, these clues point to a positive sentiment.\nSENTIMENT: Positive\n\nINPUT: with an unusual protagonist lrb a kilt wearing jackson rrb and subject matter , the improbable `` formula 51 '' is somewhat entertaining , but it could have been much stronger \nClues and the reasoning process: 1. \"Somewhat entertaining\" - This indicates that the speaker found the movie to be enjoyable, or at least not bad. \n2. \"Could have been much stronger\" - This indicates that the speaker was not fully satisfied with the movie, but still found it to be enjoyable. \nOverall, the sentiment of the sentence is positive, as the speaker found the movie to be entertaining and worthwhile, even if it could have been better.\nSENTIMENT: Positive\n\nINPUT: standing by yourself is haunting lrb it 's rrb what punk rock music used to be , and what the video medium could use more of spirit , perception , conviction \nClues and the reasoning process: 1. The phrase \"what punk rock music used to be\" implies a nostalgia for the genre, suggesting that the speaker is looking at the genre fondly. \n2. The word \"more\" suggests the speaker wants to see more of the qualities mentioned. \n3. The qualities mentioned - spirit, perception, conviction - are all positive attributes. \n4. The phrase \"standing by yourself\" can be interpreted as a sign of strength and independence, which is also a positive sentiment. \nOverall, the sentence conveys a positive sentiment.\nSENTIMENT: Positive\n\nINPUT: juliette binoche 's sand is vivacious , but it 's hard to sense that powerhouse of 19th century prose behind her childlike smile \nClues and the reasoning process: 1. The sentence contains a positive adjective (\"vivacious\") to describe Juliette Binoche's sand. This suggests a positive sentiment towards the sand and by extension, Juliette Binoche.\n2. The sentence also contains a positive phrase (\"childlike smile\") to describe Juliette Binoche. This further reinforces the positive sentiment.\n3. The sentence does not contain any negative words or phrases to suggest a negative sentiment. \nOverall, the clues and reasoning lead to a positive sentiment for the INPUT sentence.\nSENTIMENT: Positive\n\nINPUT: spirit is a visual treat , and it takes chances that are bold by studio standards , but it lacks a strong narrative \nClues and the reasoning process: 1. The sentence contains words with positive sentiment such as \"visual treat\" and \"bold\". \n2. The sentence does not contain any negative sentiment such as \"bad\", \"disappointing\", or \"poorly made\". \n3. The sentence is focused on the positive aspects of the movie and does not dwell on the negative aspects. \n4. The overall sentiment of the sentence is positive despite the lack of a strong narrative. \nThus, the sentiment of the input sentence is positive.\nSENTIMENT: Positive\n\nINPUT: although olivier assayas ' elegantly appointed period drama seems , at times , padded with incident in the way of a too conscientious adaptation its three hour running time plays closer to two \nClues and the reasoning process: 1. The word \"elegantly\" is a positive descriptor, suggesting that the movie is well-crafted and aesthetically pleasing.\n2. The phrase \"at times\" implies that the movie does not always have too much incident, meaning that it is not overstuffed with unnecessary details.\n3. The phrase \"too conscientious\" suggests that the movie is well-crafted and not sloppy.\n4. The phrase \"plays closer to two\" implies that the three-hour running time does not feel like a burden, but rather, the movie is enjoyable and engaging.\nOverall, the clues and reasoning process suggest that the sentiment of the input sentence is positive.\nSENTIMENT: Positive\n\nINPUT: reminiscent of alfred hitchcock 's thrillers , most of the scary parts in ` signs ' occur while waiting for things to happen \nClues and the reasoning process: 1. The sentence has a comparison to Alfred Hitchcock's thrillers which are generally considered to be a positive example of suspenseful storytelling. \n2. The use of the word \"most\" implies that the majority of the scary parts are in a positive light. \n3. The word \"waiting\" implies anticipation and excitement, which are generally associated with positive feelings. \n4. The use of the word \"signs\" implies that the scary parts are a sign of something bigger and more exciting. \nOverall, the clues and reasoning point to a positive sentiment for the input sentence.\nSENTIMENT: Positive\n\nINPUT: often likable , but just as often it 's meandering , low on energy , and too eager to be quirky at moments when a little old fashioned storytelling would come in handy \nClues and the reasoning process: 1. The sentence begins with the phrase \"often likable\", which suggests that the writer has some positive feelings towards the subject.\n2. The sentence continues with the phrase \"but just as often\", which implies that the writer is aware of the good and bad aspects of the subject.\n3. The sentence then mentions traits such as \"low on energy\" and \"too eager to be quirky\", which could be seen as negative, but the writer then goes on to explain that these traits can be addressed with \"a little old fashioned storytelling\".\n4. The final phrase, \"come in handy\", suggests that the writer has some hope that the subject can be improved.\nOverall, the clues and reasoning suggest that the sentiment of the sentence is Positive.\nSENTIMENT: Positive\n\nINPUT: clint eastwood 's blood work is a lot like a well made pb j sandwich familiar , fairly uneventful and boasting no real surprises but still quite tasty and inviting all the same \nClues and the reasoning process: 1. The phrase \"well made\" implies that the sandwich is of a high quality. \n2. The phrase \"no real surprises\" implies that the sandwich is something that can be expected and enjoyed. \n3. The phrase \"quite tasty\" implies that the sandwich is enjoyable. \n4. The phrase \"inviting all the same\" implies that the sandwich is still enjoyable even if it is not surprising. \nAll of these clues point to a positive sentiment about the PB&J sandwich, which can be extended to the film Blood Work.\nSENTIMENT: Positive\n\nINPUT: human nature is a goofball movie , in the way that malkovich was , but it tries too hard \nClues and the reasoning process: 1. The sentence uses words that suggest a positive sentiment such as \u201cgood\u201d and \u201ctries\u201d. \n2. The sentence suggests that the movie is comparable to a highly acclaimed movie, \u201cMalkovich\u201d, which implies a positive sentiment. \n3. The sentence does not contain any words that suggest a negative sentiment. \nTherefore, the sentiment of the sentence can be determined to be positive.\nSENTIMENT: Positive\n\nINPUT: illiterate , often inert sci fi action thriller \nClues and the reasoning process: The words \"illiterate\" and \"inert\" both have negative connotations, suggesting that the movie is of low quality and not engaging. Additionally, the use of the word \"often\" implies that the movie is not always engaging, further indicating a negative sentiment. As a result, a negative sentiment is determined for the input sentence.\nSENTIMENT: Negative\n\nINPUT: now as a former gong show addict , i 'll admit it , my only complaint is that we did n't get more re creations of all those famous moments from the show \nClues and the reasoning process: 1. The sentence begins with \"now as a former gong show addict\" which suggests that the speaker has a positive attitude towards the show. \n2. The phrase \"my only complaint is that we did n't get more re creations of all those famous moments from the show\" indicates that the speaker is disappointed in not having more memories of the show, which implies a nostalgia for the show and a positive sentiment towards it. \n3. The use of the phrase \"famous moments\" also suggests that the speaker has fond memories of the show. \nOverall, the clues and reasoning present in the sentence suggest a positive sentiment towards the show.\nSENTIMENT: Positive\n\nINPUT: a strong first quarter, slightly less so second quarter, and average second half\n"
    for user in ["10086", "1", "6688", "10043"]:
        response_lst = openai.Completion.create(
            engine="text-davinci-003",
            prompt=prompt,
            max_tokens=300,
            frequency_penalty=0,
            presence_penalty=0,
            logprobs=10
        )

        text = [item.text for item in response_lst.choices]
        log_probs = response_lst.choices[0].logprobs["token_logprobs"]
        log_prob_tokens = response_lst.choices[0].logprobs["tokens"]
        idx_max = max(enumerate(log_probs), key=lambda x: x[1])[0]
        max_token = log_prob_tokens[idx_max]
        # token_logprobs
        # tokens
        print("=" * 10)
        print(text)
        print(response_lst.choices[0])
        # print(max_token)
        # print(log_probs[idx_max])
        # print(max(log_probs))
        exit()


if __name__ == "__main__":
    get_response()
    print("$" * 40)
    # get_response_via_dynamic_user()
